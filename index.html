<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="shortcut icon" href="data/favicon_main_1.png" type="image/x-icon">
    <title>BSPG</title>
</head>
<body>
    <div id="wrap">
        <div id="header">
            <div class="header-logo">
                BSPG
            </div>
            <div class="header-nav">
                <a href="pattern2.html">패턴 생성하러 가기</a>
            </div>
        </div>
        <div id="main">
            <div class="grid-content">
                <img src="data/img1.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img2.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img3.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img4.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img5.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img6.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img7.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img8.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img9.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img10.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img11.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img12.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img13.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img14.png" alt="">
            </div>
            <div class="grid-content">
                <img src="data/img15.png" alt="">
            </div>

        <div id="page-slider">
            <iframe id="content-frame" src=""></iframe>
        </div>
        
    <!-- Overlay가 로드될 영역 -->
    <div id="overlay-page"></div>

<script>
  const overlay = document.getElementById("overlay-page");
  const mainLogo = document.querySelector("#header .header-logo");

  function toggleOverlay() {
      if (overlay.classList.contains("active")) {
          overlay.classList.remove("active");
          overlay.innerHTML = "";
      } else {
          loadPage("overlay.html");
      }
  }

  // 메인 로고 클릭 시
  mainLogo.addEventListener("click", toggleOverlay);

  // overlay 내부 로고는 동적으로 생성되므로 loadPage 안에서 이벤트 추가
  function loadPage(url) {
      fetch(url)
          .then(res => res.text())
          .then(html => {
              overlay.innerHTML = html;
              overlay.classList.add("active");
              window.scrollTo(0, 0);

              // overlay 안에 있는 로고에도 닫기 기능 추가
              const innerLogo = overlay.querySelector(".header-logo");
              if (innerLogo) {
                  innerLogo.style.cursor = "pointer";
                  innerLogo.addEventListener("click", toggleOverlay);
              }
          });
  }

  const slider = document.getElementById("page-slider");
  const iframe = document.getElementById("content-frame");
  const linkBtn = document.querySelector(".header-nav a"); // "패턴 생성하러 가기" 버튼

  // 2. 링크 클릭 시 슬라이드 작동 함수
  linkBtn.addEventListener("click", function(e) {
      e.preventDefault(); // 페이지 이동 막기
      
      // iframe에 주소 주입 (이때 로딩 시작)
      iframe.src = "pattern2.html";
      
      // 슬라이드 등장
      slider.classList.add("active");
  });

  // 3. 자식 페이지(pattern2)에서 닫기 요청을 받을 함수 (창 닫기용)
  window.closeSlider = function() {
      slider.classList.remove("active");
      
      // 애니메이션이 끝난 후 iframe 내용 비우기 (성능 최적화)
      setTimeout(() => {
          iframe.src = ""; 
      }, 500); 
  }
</script>

</body>
</html>